{{#ember-wormhole to="page-header"}}
  <h1>Store Receipts <small>GRN</small></h1>
{{/ember-wormhole}}


{{#if newGrnFormModalOpen }}

  {{#modal-dialog close='toggleModalOpen'
                  targetAttachment='none'
                  container-class='form-modal-container'
                  overlay-class='form-modal' }}

        <div class="app-modal-header">
          <i class="fa fa-close pull-right app-modal-close"  onclick={{action 'toggleModalOpen'}}></i>
          <h4>New GRN</h4>
        </div>


        <div class="app-modal-body">
          <form {{action 'addGoodReceipt' on='submit'}}>

            <div class="row">
              <div class="col-md-6">
                <label for="grn">GRN *</label>
                <div class="form-group {{if validationErrors.grn 'has-error' '' }}">
                  {{ input value=receipt.grn id="grn" type="text" class="form-control"  autofocus="autofocus"  }}

                  <span class="help-block">{{ validationErrors.grn }}</span>
                </div>

              </div>

              <div class="col-md-6">
                <label for="grn">Donor *</label>
                <div class="form-group {{if validationErrors.donorId 'has-error' '' }}">
                  <select class="form-control" value={{receipt.donorId}} onchange={{ action (mut receipt.donorId) value='target.value' }}>
                    <option value="">Choose Donor</option>
                    {{#each lookups.donors as |donor| }}
                      <option value={{donor._id}}>{{donor.name}}</option>
                    {{/each}}
                  </select>

                  <span class="help-block">{{ validationErrors.donorId }}</span>
                </div>
              </div>
            </div>

            <hr>

            <div class="row">
              <div class="col-md-6">
                <label for="grn">Received Date *</label>
                <div class="form-group {{if validationErrors.receivedDate 'has-error' '' }}">
                  {{bootstrap-datepicker value=receipt.receivedDate class="form-control"}}

                  <span class="help-block">{{ validationErrors.receivedDate }}</span>
                </div>
              </div>

              <div class="col-md-6">
                <label for="grn">Store *</label>
                <div class="form-group {{if validationErrors.storeId 'has-error' '' }}">
                  <select class="form-control"  onchange={{ action (mut receipt.storeId) value='target.value' }}>
                    <option>Choose Store</option>
                    {{#each lookups.stores as |store| }}
                      <option value={{store._id}}>{{store.name}}</option>
                    {{/each}}
                  </select>

                  <span class="help-block">{{ validationErrors.storeId }}</span>

                </div>
              </div>
            </div>


            <div class="row">
              <div class="col-md-6">
                <label for="grn">Project *</label>
                <div class="form-group {{if validationErrors.projectId 'has-error' '' }}">
                  <select class="form-control"  onchange={{ action (mut receipt.projectId) value='target.value' }}>
                    <option>Choose Project</option>
                    {{#each lookups.projects as |project| }}
                      <option value={{project._id}}>{{project.name}}</option>
                    {{/each}}
                  </select>

                  <span class="help-block">{{ validationErrors.projectId }}</span>

                </div>
              </div>

              <div class="col-md-6">
                <label for="grn">Received By *</label>
                <div class="form-group  {{if validationErrors.receivedBy 'has-error' '' }}">
                  {{ input id="receivedBy" value=receipt.receivedBy type="text" class="form-control"  }}

                  <span class="help-block">{{ validationErrors.receivedBy }}</span>
                </div>
              </div>
            </div>

            <hr>

            <h5>Receiving items</h5>

            <table class="table">
              <thead>
                <tr>
                  <th>Commodity</th>
                  <th>Batch</th>
                  <th>UoM</th>
                  <th>Quantity</th>
                  <th>Waybill</th>
                </tr>
              </thead>

              <tbody>

                {{#each receipt.items as |receiptItem| }}
                  <tr>
                    <td>Wheat</td>
                    <td>M####</td>
                    <td>Mt</td>
                    <td>250</td>
                    <td>######</td>
                  </tr>
                {{/each}}


                <tr>
                  <td>
                    <select class="form-control"  onchange={{ action (mut receipt.projectId) value='target.value' }}>
                      <option>Choose Commodity</option>

                    </select>
                  </td>
                  <td>{{input type='text'}}</td>
                  <td>
                    <select class="form-control"  onchange={{ action (mut receipt.projectId) value='target.value' }}>
                      <option>Choose UoM</option>
                    
                    </select>
                  </td>
                  <td>{{input type='number'}}</td>
                  <td>{{input type='text'}}</td>
                </tr>
              </tbody>
            </table>

            <hr>

            <h5>Transporter</h5>

            <div class="row">
              <div class="col-md-6">
                <label for="grn">Weight Bridge #</label>
                <div class="form-group   {{if validationErrors.weightBridge 'has-error' '' }}">
                  {{ input  type="text" value=receipt.weightBridge class="form-control"  }}

                  <span class="help-block">{{ validationErrors.weightBridge }}</span>
                </div>
              </div>

              <div class="col-md-6">
                <label for="grn">Transporter</label>
                <div class="form-group   {{if validationErrors.transporter 'has-error' '' }}">
                  {{ input  type="text" value=receipt.transporter class="form-control"  }}

                  <span class="help-block">{{ validationErrors.transporter }}</span>
                </div>
              </div>
            </div>


            <div class="row">
              <div class="col-md-6">
                <label for="grn">Weight before unloading</label>
                <div class="form-group   {{if validationErrors.transporter 'has-error' '' }}">
                  {{ input  type="number" value=receipt.weightBeforeUnloading class="form-control"  }}

                  <span class="help-block">{{ validationErrors.weightBeforeUnloading }}</span>
                </div>
              </div>

              <div class="col-md-6">
                <label for="grn">Plate #</label>
                <div class="form-group   {{if validationErrors.plateNumber 'has-error' '' }}">
                  {{ input  type="text" value=receipt.plateNumber class="form-control"  }}

                  <span class="help-block">{{ validationErrors.plateNumber }}</span>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-6">
                <label for="grn">Weight after unloading</label>
                <div class="form-group  {{if validationErrors.weightAfterUnloading 'has-error' '' }}">
                  {{ input  type="text" value=receipt.weightAfterUnloading class="form-control"  }}

                  <span class="help-block">{{ validationErrors.weightAfterUnloading }}</span>
                </div>
              </div>

              <div class="col-md-6">
                <label for="grn">Trailer plate #</label>
                <div class="form-group  {{if validationErrors.trailerPlate 'has-error' '' }}">
                  {{ input  type="text" value=receipt.trailerPlate class="form-control"  }}

                  <span class="help-block">{{ validationErrors.trailerPlate }}</span>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-6">

              </div>

              <div class="col-md-6">
                <label for="grn">Driver's name</label>
                <div class="form-group  {{if validationErrors.driverName 'has-error' '' }}">
                  {{ input  type="text" class="form-control" value=receipt.driverName  }}

                  <span class="help-block">{{ validationErrors.driverName }}</span>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-6">

              </div>

              <div class="col-md-6">
                <a onclick={{ action "createGRN"}} href="#" class="btn btn-primary"><i class="fa fa-save"></i> Save</a>
                <a href="#" class="btn btn-primary"><i class="fa fa-save"></i> Save and New</a>
                <a href="#" class="btn btn-defails"><i class="fa fa-cancel"></i> Cancel</a>
              </div>
            </div>


          </form>
        </div>
  {{/modal-dialog}}
{{/if}}




<div class="box">

  <div class="box-body">


    <div class="row">
      <div class="col-xs-2">
        <select class="form-control" name="">
          <option>Choose Store</option>
          <option>Adama Steel</option>
        </select>
      </div>
      <div class="col-xs-2">
        <div class="input-group date">
          <div class="input-group-addon">
            <i class="fa fa-calendar"></i>
          </div>
          <input class="form-control pull-right" id="datepicker" type="text" placeholder="Pick a date">
        </div>
      </div>
      <div class="col-xs-3">
        <input class="form-control" placeholder="GRN" type="text">
      </div>
      <div class="col-xs-1">
        <a class="btn btn-default"><i class="fa fa-search"></i> Search</a>
      </div>

      <div class="col-xs-offset-3 col-xs-1">
        <a class="btn btn-primary" onclick={{action 'toggleModalOpen'}}><i class="fa fa-plus"></i> Add</a>
      </div>
    </div>


  </div>
</div>


<div class="box">

  <div class="box-body">
    <table class="table table-bordered">
      <tbody>


      <tr>
        <th style="width: 10px">#</th>
        <th>GRN</th>
        <th>Receipt Date</th>
        <th>Store</th>
        <th>Received by</th>
        <th>Posted</th>
        <th>Quantity</th>
        <th>UoM</th>
        <th>Tasks</th>
      </tr>

      <tr>
        <td>1</td>
        <td>098023429</td>
        <td>Dec 2, 2016</td>
        <td>Adama</td>
        <td>Store Keeper 1</td>
        <td>Yes</td>
        <td>45</td>
        <td>Mt</td>
        <td>Open | Delete</td>
      </tr>


      </tbody>
    </table>
  </div>

  <!-- /.box-body -->
  <div class="box-footer clearfix">
    <ul class="pagination pagination-sm no-margin pull-right">
      <li><a href="#">&laquo;</a></li>
      <li><a href="#">1</a></li>
      <li><a href="#">2</a></li>
      <li><a href="#">3</a></li>
      <li><a href="#">&raquo;</a></li>
    </ul>
  </div>
</div>
<!-- /.box -->
